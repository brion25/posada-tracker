{"version":3,"sources":["webpack:///./src/views/Map.vue?8821","webpack:///./src/views/Map.vue?c4af","webpack:///src/views/Map.vue","webpack:///./src/views/Map.vue?62fe","webpack:///./src/views/Map.vue?a088"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","indeterminate","color","size","_e","ref","zoom","map","center","url","tileLayer","$route","query","party","lat-lng","coords","latitude","longitude","on","add","markerAdd","_v","_s","name","address","description","to","path","location","id","_l","index","key","staticRenderFns","Mapvue_type_script_lang_js_","mounted","getPositions","watch","nextRoute","prevRoute","nextLocation","prevLocation","Number","methods","Object","objectSpread","event","window","setTimeout","target","openPopup","loading","setCenter","navigator","geolocation","options","timeout","maximumAge","getCurrentPosition","handlePosition","handleError","error","message","code","console","concat","position","$refs","partiesMap","mapObject","partyObj","$store","getters","getParty","vue2_leaflet_min","Routing","control","waypoints","latLng","routeWhileDragging","show","addTo","vuex_esm","computed","parties","components","LMap","LTileLayer","LMarker","LPopup","views_Mapvue_type_script_lang_js_","component","componentNormalizer","__file","__webpack_exports__","installComponents_default","VProgressCircular"],"mappings":"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","file":"js/about.ce958d20.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map__content\"},[(_vm.loading)?_c('div',{staticClass:\"map__loader\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"true\",\"color\":\"red darken-4\",\"size\":50}})],1):_vm._e(),_c('LMap',{ref:\"partiesMap\",attrs:{\"zoom\":_vm.map.zoom,\"center\":_vm.map.center}},[_c('LTileLayer',{attrs:{\"url\":_vm.map.tileLayer}}),(_vm.$route.query.party && _vm.party)?[_c('LMarker',{attrs:{\"lat-lng\":[_vm.party.coords.latitude, _vm.party.coords.longitude]},on:{\"add\":_vm.markerAdd}},[_c('LPopup',[_c('h3',[_vm._v(_vm._s(_vm.party.name))]),_c('small',[_vm._v(_vm._s(_vm.party.address))]),_c('p',{staticClass:\"party__description\"},[_vm._v(\"\\n            \"+_vm._s(_vm.party.description)+\"\\n          \")]),_c('router-link',{attrs:{\"to\":{path: '/map', query: {location: _vm.party.id}}}},[_vm._v(\"\\n            Indicaciones hasta aqui\\n          \")])],1)],1)]:_vm._e(),(!_vm.$route.query.location && !_vm.$route.query.party)?_vm._l((_vm.parties),function(party,index){return _c('LMarker',{key:index,attrs:{\"lat-lng\":party.coords}},[_c('LPopup',[_c('h3',[_vm._v(_vm._s(party.name))]),_c('small',[_vm._v(_vm._s(party.address))]),_c('p',[_vm._v(\"\\n            \"+_vm._s(party.description)+\"\\n          \")])])],1)}):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script src=\"../store.js\"></script>\n<template>\n  <div class=\"map__content\">\n    <div class=\"map__loader\" v-if=\"loading\">\n      <v-progress-circular indeterminate=\"true\" color=\"red darken-4\" :size=\"50\"></v-progress-circular>\n    </div>\n    <LMap ref=\"partiesMap\" :zoom=\"map.zoom\" :center=\"map.center\">\n      <LTileLayer :url=\"map.tileLayer\"></LTileLayer>\n      <template v-if=\"$route.query.party && party\">\n        <LMarker @add=\"markerAdd\" :lat-lng=\"[party.coords.latitude, party.coords.longitude]\">\n          <LPopup>\n            <h3>{{party.name}}</h3>\n            <small>{{party.address}}</small>\n            <p class=\"party__description\">\n              {{party.description}}\n            </p>\n            <router-link :to=\"{path: '/map', query: {location: party.id}}\">\n              Indicaciones hasta aqui\n            </router-link>\n          </LPopup>\n        </LMarker>\n      </template>\n      <template v-if=\"!$route.query.location && !$route.query.party\">\n        <LMarker v-for=\"(party, index) in parties\" :key=\"index\" :lat-lng=\"party.coords\">\n          <LPopup>\n            <h3>{{party.name}}</h3>\n            <small>{{party.address}}</small>\n            <p>\n              {{party.description}}\n            </p>\n          </LPopup>\n        </LMarker>\n      </template>\n    </LMap>\n  </div>\n</template>\n<script>\nimport { L, LMap, LTileLayer, LMarker, LPopup } from 'vue2-leaflet'\nimport { mapGetters, mapActions } from 'vuex'\n\nexport default ({\n  mounted: function () {\n    this.getPositions()\n  },\n  watch: {\n    $route: function(nextRoute, prevRoute) {\n      const {query: { location: nextLocation }} = nextRoute\n      const {query: { location: prevLocation }} = prevRoute\n      if (Number(nextLocation) !== Number(prevLocation)) {\n        this.getPositions()\n      }\n    }\n  },\n  methods: {\n    markerAdd: function (event) {\n      // Hack to open the popup once it is loaded\n      window.setTimeout(() => {\n        event.target.openPopup()\n      }, 250)\n    },\n    getPositions: function() {\n      this.loading = true\n      const {query: { party }} = this.$route\n      if (party) {\n        this.setCenter(this.party.coords)\n        this.loading = false\n      }\n      if (navigator.geolocation && !party) {\n        const options = {\n          timeout: 5000,\n          maximumAge: 0\n        }\n\n        navigator.geolocation.getCurrentPosition(this.handlePosition, this.handleError, options)\n      }\n    },\n    handleError: function(error) {\n      const {message, code} = error\n      console.error(`Error ${code}`, message)\n      if (code === 3) {\n        this.getPositions()\n      }\n    },\n    handlePosition: function(position) {\n      const { coords } = position\n      const {query: { location }} = this.$route\n\n      if (location) {\n        const map = this.$refs.partiesMap.mapObject\n        const partyObj = this.$store.getters.getParty(location)\n\n        L.Routing.control({\n          waypoints: [\n            L.latLng(coords.latitude, coords.longitude),\n            L.latLng(partyObj.coords.latitude, partyObj.coords.longitude)\n          ],\n          routeWhileDragging: true,\n          show: false\n        }).addTo(map)\n      }\n\n      this.setCenter(coords)\n      this.loading = false\n    },\n    ...mapActions({\n      setCenter: 'setMapCenter'\n    })\n  },\n  computed: {\n    party: function() {\n      const {query: { party }} = this.$route\n      if (!party) {\n        return null\n      }\n      return this.$store.getters.getParty(party)\n    },\n    ...mapGetters({\n      map: 'getMapData',\n      parties: 'getMapParties'\n    })\n  },\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LPopup\n  }\n})\n</script>\n<style>\n  .map__content {\n    height: 100%;\n  }\n  .map__loader {\n    position: fixed;\n    z-index: 999;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 10px;\n    background-color: #FFCDD2;\n  }\n\n  .party__description {\n    max-width: 250px;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=67aefd0a&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Map.vue\"\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VProgressCircular } from 'vuetify/lib'\ninstallComponents(component, {\n  VProgressCircular,\n})\n"],"sourceRoot":""}